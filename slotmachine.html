<!DOCTYPE html>
<html lang="pl-PL">
    <head>
		<meta charset="utf-8">
		<style>
			:root {
				--gold: #FFD700;
			}
			body {
				font-family: Arial, sans-serif;
				background: #1a1a2e;
				color: #fff;
			}
			.modal {
				position: fixed;
				top: 0;
				left: 0;
				width: 100%;
				height: 100%;
				background: rgba(0,0,0,0.8);
				display: flex;
				justify-content: center;
				align-items: center;
			}
			.modal-content {
				background: #16213e;
				padding: 40px;
				border-radius: 10px;
				text-align: center;
			}
			.modal-content input {
				padding: 10px;
				font-size: 18px;
				margin: 20px 0;
				width: 200px;
			}
			.close-btn {
				background: #4CAF50;
				color: white;
				padding: 15px 30px;
				border: none;
				border-radius: 5px;
				font-size: 18px;
				cursor: pointer;
			}
			.close-btn:hover {
				background: #45a049;
			}
			.btn {
				background-color: red;
				color: #fff;
				padding: 15px 40px;
				border: none;
				border-radius: 5px;
				font-size: 20px;
				cursor: pointer;
				margin-top: 20px;
			}
			.btn:hover {
				background-color: #cc0000;
			}
			.btn:disabled {
				background-color: #666;
				cursor: not-allowed;
			}
			.slot-machine {
				display: none;
				text-align: center;
			}
			.board {
				position: relative;
				display: flex;
				justify-content: space-around;
				align-items: center;	
				width: 500px;
				height: 340px;
				margin: 20px auto 0 auto;
				padding: 20px;
				background-color: var(--gold);
				border: 15px var(--gold) solid;
				border-radius: 5px 5px 0 0;
			}
			.board .bar {
				position: relative;
				display: flex;
				justify-content: center;
				align-items: center;	
				width: 140px;
				height: 300px;
				overflow: hidden;
				border-radius: 10px;
				background-color: #fff;
			}

			.slot1,
			.slot2,
			.slot3 {
				position: absolute;
				top: 0;
				transition: top 0.05s linear;
			}

			.board .bar .slot-item {
				display: flex;
				justify-content: center;
				align-items: center;	
				width: 140px;
				height: 100px;
				font-size: 50px;
				text-align: center;	
			}
			.money, .bet {
				font-size: 20px;
				margin: 10px 0;
			}
			.bet input {
				padding: 5px;
				font-size: 18px;
				width: 100px;
				margin-left: 10px;
			}
			.pts-info {
				padding: 10px;
				border-radius: 5px;
			}

			.row {
				display: flex;
				gap: 10px;
			}

			.col-md-6 {
				flex: 1;
			}

			.pts-item {
				background: #34495e;
				border: 1px solid #444;
				border-radius: 5px;
				padding: 5px;
				margin-bottom: 5px;
				text-align: center;
				font-size: 1.2rem;
				color: #fff;
			}

			.pts-item.points {
				background: #e74c3c;
				font-weight: bold;
				font-size: 1.5rem;
			}

			@media (max-width: 768px) {
				.row {
					flex-direction: column;
				}
			}
		</style>
		<script type="text/javascript" src="jquery-3.3.1.min.js"></script>
		<script>
            const SYMBOL = ['🍉', '🍋', '🍒', '🔔', '🍇', '7️⃣', '💰', '🍀'];
			const SLOT_LENGHT = 32;
			const ARR_80 = [SYMBOL[1], SYMBOL[2], SYMBOL[3], SYMBOL[4]];
			const ARR_160 = [SYMBOL[0], SYMBOL[5], SYMBOL[6], SYMBOL[7]];
            let money = 0;
            let bet = 1;
            let slot1;
            let slot2;
            let slot3;

            let result;

            function generateSymbols() {
                let symbols = [];
                for (let i = 0; i < SLOT_LENGHT; i++) {
                    let symbol = SYMBOL[Math.floor(Math.random() * SYMBOL.length)];
                    symbols.push(symbol);
                }
                return symbols;
            }

            function generateResult() {
                let result = [
                    [],
                    [],
                    []
                ];
                for (let i = 0; i < 3; i++) {
                    for (let j = 0; j < 3; j++) {
                        result[i][j] = SYMBOL[Math.floor(Math.random() * SYMBOL.length)];
                    }
                }
                return result;
            }
            slot1 = generateSymbols();
            slot2 = generateSymbols();
            slot3 = generateSymbols();

            function loadSymbols() {
				$(".slot1").empty();
				$(".slot2").empty();
				$(".slot3").empty();
                for (let i = 0; i < SLOT_LENGHT; i++) {
                    $(".slot1").append(`<div class="slot-item">${slot1[i]}</div>`);
                    $(".slot2").append(`<div class="slot-item">${slot2[i]}</div>`);
                    $(".slot3").append(`<div class="slot-item">${slot3[i]}</div>`);
                }
            }
			function setResult(result) {
				for (let i = 0; i < 3; i++) {
                    $(".slot1").append(`<div class="slot-item">${result[i][0]}</div>`);
                    $(".slot2").append(`<div class="slot-item">${result[i][1]}</div>`);
                    $(".slot3").append(`<div class="slot-item">${result[i][2]}</div>`);
                }
                for (let i = 2; i >= 0; i--) {
                    $(".slot1").prepend(`<div class="slot-item">${result[i][0]}</div>`);
                    $(".slot2").prepend(`<div class="slot-item">${result[i][1]}</div>`);
                    $(".slot3").prepend(`<div class="slot-item">${result[i][2]}</div>`);
                }
			}
			function checkResult(result) {
				let win = 0;
				for (let i = 0; i < 3; i++) {
					if (result[i][0] == result[i][1] && result[i][1] == result[i][2]) {
						console.log(result[i][0] + " " + result[i][1] + " " + result[i][2]);
						if (ARR_80.includes(result[i][0])) {
							win = bet * 80;
						}
						if (ARR_160.includes(result[i][0])) {
							win = bet * 160;
						}
					}else if (result[i][0] == result[i][1] || result[i][1] == result[i][2]) {
						console.log(result[i][0] + " " + result[i][1] + " " + result[i][2]);
						if (ARR_80.includes(result[i][0])) {
							win = bet * 40;
						}
						if (ARR_160.includes(result[i][0])) {
							win = bet * 80;
						}
					}
				}
				console.log("Wygrana: " + win);
				return win;
			}
            function initGame() {
                loadSymbols();
                result = generateResult();
                console.log(result);
                setResult(result);
            }
			function startGame() {
				money -= bet*10;
				if (money < 10) {
					alert("Brak srodkow!");
					$("#modal").show();
					$("#slotMachine").hide();
					return;
				}
				
				loadSymbols();
				result = generateResult();
				console.log(result);
				setResult(result);
				
				let win = checkResult(result);
				money += win;
				$("#money").text(money);
			}
            $(document).ready(function() {
                initGame();
                $("#startBtn").click(function() {
					if($("#moneyModal").val() <10){
						alert("Nalezy wprowadzic co najmniej 10 monet!");
						return;
					}
                    $("#modal").hide();
                    $("#slotMachine").show();
                    money = $("#moneyModal").val();
                    $("#money").text(money);
                    $("#bet").val(bet);
                });
				$("#bet").change(function() {
					bet = $("#bet").val();
				});
                $(".btn").click(function() {
                    startGame();
                });
            });
        </script>
    </head>
    <body>
		<div class="modal" id="modal">
			<div class="modal-content">
				<p>Za ile chesz grac?</p>
				<form>
					<input type="number" id="moneyModal">
				</form>
				<button class="close-btn" id="startBtn">Start</button>
			</div>
		</div>
		<div class="slot-machine" id="slotMachine">
			<div class="pts-info">
				<div class="row">
					<div class="col-md-6">
						<div class="pts-item">
							🍒 🍒 🍒 | 🍋 🍋 🍋 | 🍇 🍇 🍇 | 🔔 🔔 🔔
						</div>
						<div class="pts-item points">
							80
						</div>
					</div>
					<div class="col-md-6">
						<div class="pts-item">
							🍉 🍉 🍉 | 7️⃣ 7️⃣ 7️⃣  | 💰 💰 💰 | 🍀 🍀 🍀
						</div>
						<div class="pts-item points">
							160
						</div>
					</div>
				</div>
				
				<div class="row">
					<div class="col-md-6">
						<div class="pts-item">
							🍒 🍒  | 🍋 🍋  | 🍇 🍇  | 🔔 🔔 
						</div>
						<div class="pts-item points">
							40
						</div>
					</div>
					<div class="col-md-6">
						<div class="pts-item">
							🍉 🍉  | 7️⃣ 7️⃣ | 💰 💰  | 🍀 🍀 
						</div>
						<div class="pts-item points">
							80
						</div>
					</div>
				</div>
			</div>
			<h1>Slot Machine</h1>
			<div class="board">
				<div class="bar">
					<div class="slot1">
						
					</div>
				</div>
				<div class="bar">
					<div class="slot2">
						
					</div>
				</div>
				<div class="bar">
					<div class="slot3">
					
					</div>
				</div>
			</div>
			<div class="money">
				<p>Kredyt: <span id="money"></span></p>
			</div>
			<div class="bet">
				<p>Satwka:</p>
				<input type="number" id="bet" min="1" step="1">
			</div>
			<button class="btn">Spin</button>
		</div>
    </body>
</html>